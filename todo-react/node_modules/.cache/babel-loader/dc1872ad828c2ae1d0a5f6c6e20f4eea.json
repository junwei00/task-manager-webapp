{"ast":null,"code":"import _slicedToArray from\"/home/oaeiu/cvwo-todo-app/todo-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Sidebar(_ref){var tagList=_ref.tagList,getTags=_ref.getTags,filterTasksByTag=_ref.filterTasksByTag,setFilteredTaskList=_ref.setFilteredTaskList,taskList=_ref.taskList;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showNewtag=_useState2[0],setShowNewtag=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showEdittag=_useState4[0],setShowEdittag=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newtagName=_useState6[0],setNewtagName=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),currentTag=_useState8[0],setCurrentTag=_useState8[1];function Newtag(){if(showEdittag&&!showNewtag){setShowEdittag(false);}setShowNewtag(!showNewtag);}function Edittag(){if(!showEdittag&&showNewtag){setShowNewtag(false);}setShowEdittag(!showEdittag);}function handleKeyDown(e){if(e.key==='Enter'){postTag();}}function postTag(){axios.post(\"/api/tags\",{name:newtagName}).then(function(res){setShowNewtag(false);getTags();}).catch(function(error){return console.log(error);});}function deleteTag(id){axios.delete(\"/api/tags/\".concat(id)).then(function(res){getTags();}).catch(function(error){return console.log(error);});}var newtagInput=/*#__PURE__*/_jsx(\"input\",{className:\"NewtagInput\",onKeyDown:handleKeyDown,onChange:function onChange(e){return setNewtagName(e.target.value);}});return/*#__PURE__*/_jsxs(\"div\",{className:\"Sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:currentTag==-1?\"Tag Tag-selected\":\"Tag\",onClick:function onClick(){setFilteredTaskList(taskList);setCurrentTag(-1);},children:[/*#__PURE__*/_jsx(\"a\",{children:\"All\"}),/*#__PURE__*/_jsx(\"a\",{className:\"Number\",children:taskList.length})]}),tagList.map(function(tag,index){var className=\"Tag\";if(tag.id==currentTag){className+=\" Tag-selected\";}if(showEdittag){className=\"Tag-editing\";}return/*#__PURE__*/_jsxs(\"div\",{className:className,onClick:function onClick(){filterTasksByTag(tag.id);setCurrentTag(tag.id);},children:[/*#__PURE__*/_jsx(\"a\",{children:tag.name}),showEdittag?/*#__PURE__*/_jsx(\"a\",{className:\"Cross\",onClick:function onClick(){return deleteTag(tag.id);},children:\"X\"}):/*#__PURE__*/_jsx(\"a\",{className:\"Number\",children:tag.tasks.length})]},index);}),/*#__PURE__*/_jsxs(\"div\",{className:\"NewEdit\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"Newtag\",onClick:Newtag,children:showNewtag?\"Close\":\"New\"}),/*#__PURE__*/_jsx(\"a\",{className:\"Edittag\",onClick:Edittag,children:showEdittag?\"Close\":\"Edit\"})]}),showNewtag?newtagInput:\"\"]});}export default Sidebar;","map":{"version":3,"sources":["/home/oaeiu/cvwo-todo-app/todo-react/src/components/Sidebar.js"],"names":["useState","useEffect","axios","Sidebar","tagList","getTags","filterTasksByTag","setFilteredTaskList","taskList","showNewtag","setShowNewtag","showEdittag","setShowEdittag","newtagName","setNewtagName","currentTag","setCurrentTag","Newtag","Edittag","handleKeyDown","e","key","postTag","post","name","then","res","catch","error","console","log","deleteTag","id","delete","newtagInput","target","value","length","map","tag","index","className","tasks"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport axios from \"axios\"\n\nfunction Sidebar({ tagList, getTags, filterTasksByTag, setFilteredTaskList, taskList }) {\n\n  const [showNewtag, setShowNewtag] = useState(false)\n  const [showEdittag, setShowEdittag] = useState(false)\n  const [newtagName, setNewtagName] = useState(\"\")\n  const [currentTag, setCurrentTag] = useState(0)\n\n  function Newtag() {\n    if (showEdittag && !showNewtag) {\n      setShowEdittag(false)\n    }\n    setShowNewtag(!showNewtag)  \n  }\n\n  function Edittag() {\n    if (!showEdittag && showNewtag) {\n      setShowNewtag(false)\n    }\n    setShowEdittag(!showEdittag)\n  }\n\n  function handleKeyDown(e) {\n    if (e.key === 'Enter') {\n      postTag()\n    }\n  }\n\n  function postTag() {\n    axios\n      .post(\"/api/tags\", {\n        name: newtagName\n      })\n      .then((res) => {\n        setShowNewtag(false)\n        getTags()\n      })\n      .catch((error) => console.log(error))\n  }\n\n  function deleteTag(id) {\n    axios\n      .delete(`/api/tags/${id}`)\n      .then((res) => {\n        getTags()\n      })\n      .catch((error) => console.log(error))\n  }\n\n  const newtagInput = \n    <input \n      className=\"NewtagInput\" \n      onKeyDown={handleKeyDown}\n      onChange={(e) => setNewtagName(e.target.value)}\n    />\n\n  return (\n    <div className='Sidebar'>\n      <div className={currentTag == -1 ? \"Tag Tag-selected\" : \"Tag\"} onClick={() => {\n          setFilteredTaskList(taskList)\n          setCurrentTag(-1)\n          }}>\n        <a>\n          All\n        </a>\n        <a className='Number'>\n          {taskList.length}\n        </a>\n      </div>\n      {tagList.map((tag, index) => {\n        let className=\"Tag\"\n        if (tag.id == currentTag) {\n          className+=\" Tag-selected\"\n        } \n        if (showEdittag) {\n          className=\"Tag-editing\"\n        }\n        return (\n        <div key={index} className={className} onClick={() => {\n          filterTasksByTag(tag.id)\n          setCurrentTag(tag.id)\n          }}>\n          <a>\n            {tag.name}\n          </a>\n          {showEdittag \n            ? <a className=\"Cross\" onClick={() => deleteTag(tag.id)}>\n                X\n              </a> \n            : <a className=\"Number\">{tag.tasks.length}</a>}\n        </div>)\n      })}\n      <div className=\"NewEdit\">\n      <a className=\"Newtag\" onClick={Newtag} >\n        {showNewtag ? \"Close\" : \"New\"}\n      </a>\n      <a className=\"Edittag\" onClick={Edittag} >\n        {showEdittag ? \"Close\" : \"Edit\"}\n      </a>\n      </div>\n      {showNewtag ? newtagInput : \"\"}\n    </div>\n  );\n}\n\nexport default Sidebar"]},"metadata":{},"sourceType":"module"}