{"ast":null,"code":"import _slicedToArray from\"/home/oaeiu/todo-app/cvwo-todo-app/todo-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Sidebar(_ref){var currentUserId=_ref.currentUserId,tagList=_ref.tagList,getUserTags=_ref.getUserTags,filterTasksByTag=_ref.filterTasksByTag,resetTagFilter=_ref.resetTagFilter,taskList=_ref.taskList,currentUsername=_ref.currentUsername,setShowEditUser=_ref.setShowEditUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showNewtag=_useState2[0],setShowNewtag=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showEdittag=_useState4[0],setShowEdittag=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newtagName=_useState6[0],setNewtagName=_useState6[1];var _useState7=useState(-1),_useState8=_slicedToArray(_useState7,2),currentTag=_useState8[0],setCurrentTag=_useState8[1];function Newtag(){if(showEdittag&&!showNewtag){setShowEdittag(false);}setShowNewtag(!showNewtag);}function Edittag(){if(!showEdittag&&showNewtag){setShowNewtag(false);}setShowEdittag(!showEdittag);}function handleKeyDown(e){if(e.key==='Enter'){if(newtagName.length>10){alert('Please use tags with a maximum of 10 characters');}else{postTagUser();}}}function postTagUser(){axios.post(\"/api/\".concat(currentUserId,\"/tags\"),{name:newtagName}).then(function(res){setShowNewtag(false);getUserTags();}).catch(function(error){return console.log(error);});}function deleteTag(id){axios.delete(\"/api/tags/\".concat(id)).then(function(res){getUserTags();}).catch(function(error){return console.log(error);});}var newtagInput=/*#__PURE__*/_jsx(\"input\",{className:\"NewtagInput\",onKeyDown:handleKeyDown,onChange:function onChange(e){return setNewtagName(e.target.value);}});return/*#__PURE__*/_jsxs(\"div\",{className:\"Sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"UserProfile\",onClick:function onClick(){return setShowEditUser(true);},children:/*#__PURE__*/_jsx(\"h2\",{children:currentUsername})}),/*#__PURE__*/_jsxs(\"div\",{className:currentTag==-1?\"Tag Tag-selected\":\"Tag\",onClick:function onClick(){resetTagFilter();setCurrentTag(-1);},children:[/*#__PURE__*/_jsx(\"li\",{children:\"All\"}),/*#__PURE__*/_jsx(\"li\",{className:\"Number\",children:taskList.length})]}),tagList.map(function(tag,index){var className=\"Tag\";if(tag.id==currentTag){className+=\" Tag-selected\";}if(showEdittag){className=\"Tag-editing\";}return/*#__PURE__*/_jsxs(\"div\",{className:className,onClick:function onClick(){filterTasksByTag(tag.id);setCurrentTag(tag.id);},children:[/*#__PURE__*/_jsx(\"li\",{children:tag.name}),showEdittag?/*#__PURE__*/_jsx(\"li\",{className:\"Cross\",onClick:function onClick(){return deleteTag(tag.id);},children:\"X\"}):/*#__PURE__*/_jsx(\"li\",{className:\"Number\",children:tag.tasks.length})]},index);}),/*#__PURE__*/_jsxs(\"div\",{className:\"NewEdit\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"Newtag\",onClick:Newtag,children:showNewtag?\"Close\":\"New\"}),/*#__PURE__*/_jsx(\"li\",{className:\"Edittag\",onClick:Edittag,children:showEdittag?\"Close\":\"Edit\"})]}),showNewtag?newtagInput:null]});}export default Sidebar;","map":{"version":3,"sources":["/home/oaeiu/todo-app/cvwo-todo-app/todo-react/src/components/Sidebar.js"],"names":["useState","useEffect","axios","Sidebar","currentUserId","tagList","getUserTags","filterTasksByTag","resetTagFilter","taskList","currentUsername","setShowEditUser","showNewtag","setShowNewtag","showEdittag","setShowEdittag","newtagName","setNewtagName","currentTag","setCurrentTag","Newtag","Edittag","handleKeyDown","e","key","length","alert","postTagUser","post","name","then","res","catch","error","console","log","deleteTag","id","delete","newtagInput","target","value","map","tag","index","className","tasks"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport axios from \"axios\"\n\nfunction Sidebar({ \n  currentUserId, tagList, getUserTags, filterTasksByTag, resetTagFilter, \n  taskList, currentUsername, setShowEditUser }) {\n\n  const [showNewtag, setShowNewtag] = useState(false)\n  const [showEdittag, setShowEdittag] = useState(false)\n  const [newtagName, setNewtagName] = useState(\"\")\n  const [currentTag, setCurrentTag] = useState(-1)\n\n  function Newtag() {\n    if (showEdittag && !showNewtag) {\n      setShowEdittag(false)\n    }\n    setShowNewtag(!showNewtag)  \n  }\n\n  function Edittag() {\n    if (!showEdittag && showNewtag) {\n      setShowNewtag(false)\n    }\n    setShowEdittag(!showEdittag)\n  }\n\n  function handleKeyDown(e) {\n    if (e.key === 'Enter') {\n      if (newtagName.length > 10) {\n        alert('Please use tags with a maximum of 10 characters')\n      } else {\n        postTagUser()\n      }\n    }\n  }\n\n  function postTagUser() {\n    axios\n      .post(`/api/${currentUserId}/tags`, {\n        name: newtagName\n      })\n      .then((res) => {\n        setShowNewtag(false)\n        getUserTags()\n      })\n      .catch((error) => console.log(error))\n  }\n\n  function deleteTag(id) {\n    axios\n      .delete(`/api/tags/${id}`)\n      .then((res) => {\n        getUserTags()\n      })\n      .catch((error) => console.log(error))\n  }\n\n  const newtagInput = \n    <input \n      className=\"NewtagInput\" \n      onKeyDown={handleKeyDown}\n      onChange={(e) => setNewtagName(e.target.value)}\n    />\n\n  return (\n    <div className='Sidebar'>\n      <div \n        className='UserProfile' \n        onClick={() => setShowEditUser(true)}>\n        {<h2>{currentUsername}</h2>}\n      </div>\n      <div className={currentTag == -1 ? \"Tag Tag-selected\" : \"Tag\"} onClick={() => {\n          resetTagFilter()\n          setCurrentTag(-1)\n          }}>\n        <li>\n          All\n        </li>\n        <li className='Number'>\n          {taskList.length}\n        </li>\n      </div>\n      {tagList.map((tag, index) => {\n        let className=\"Tag\"\n        if (tag.id == currentTag) {\n          className+=\" Tag-selected\"\n        } \n        if (showEdittag) {\n          className=\"Tag-editing\"\n        }\n        return (\n        <div key={index} className={className} onClick={() => {\n          filterTasksByTag(tag.id)\n          setCurrentTag(tag.id)\n          }}>\n          <li>\n            {tag.name}\n          </li>\n          {showEdittag \n            ? <li className=\"Cross\" onClick={() => deleteTag(tag.id)}>\n                X\n              </li> \n            : <li className=\"Number\">{tag.tasks.length}</li>}\n        </div>)\n      })}\n      <div className=\"NewEdit\">\n      <li className=\"Newtag\" onClick={Newtag} >\n        {showNewtag ? \"Close\" : \"New\"}\n      </li>\n      <li className=\"Edittag\" onClick={Edittag} >\n        {showEdittag ? \"Close\" : \"Edit\"}\n      </li>\n      </div>\n      {showNewtag ? newtagInput : null}\n    </div>\n  );\n}\n\nexport default Sidebar"]},"metadata":{},"sourceType":"module"}